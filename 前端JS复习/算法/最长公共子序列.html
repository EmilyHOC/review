<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>最长公共子序列</title>
</head>
<body>
    <script>

        // function LCS(str1, str2) {
        //     var m = str1.length
        //     var n = str2.length
        //     var dp = [new Array(n + 1).fill(0)] //第一行全是0
        //     for (var i = 1; i <= m; i++) { //一共有m+1行
        //         dp[i] = [0] //第一列全是0
        //         for (var j = 1; j <= n; j++) {//一共有n+1列
        //             if (str1[i - 1] === str2[j - 1]) {
        //                 //注意这里，str1的第一个字符是在第二列中，因此要减1，str2同理
        //                 dp[i][j] = dp[i - 1][j - 1] + 1 //对角＋1
        //             } else {
        //                 dp[i][j] = Math.max(dp[i - 1][j], dp[i][j - 1])
        //             }
        //         }
        //     }
        //     return dp[m][n];
        // }


        function printLCS(dp, str1, str2, i, j){
            if (i == 0 || j == 0){
                return "";
            }
            if( str1[i-1] == str2[j-1] ){
                return printLCS(dp, str1, str2, i-1, j-1) + str1[i-1];
            }else{
                if (dp[i][j-1] > dp[i-1][j]){
                    return printLCS(dp, str1, str2, i, j-1);
                }else{
                    return printLCS(dp, str1, str2, i-1, j);
                }
            }
        }

        function LCS(str1, str2) {
            var m = str1.length
            var n = str2.length
            var dp = [new Array(n + 1).fill(0)] //第一行全是0
            for (var i = 1; i <= m; i++) { //一共有m+1行
                dp[i] = [0] //第一列全是0
                for (var j = 1; j <= n; j++) {//一共有n+1列
                    if (str1[i - 1] === str2[j - 1]) {
                        //注意这里，str1的第一个字符是在第二列中，因此要减1，str2同理
                        dp[i][j] = dp[i - 1][j - 1] + 1 //对角＋1
                    } else {
                        dp[i][j] = Math.max(dp[i - 1][j], dp[i][j - 1])
                    }
                }
            }
            var s = printLCS(dp, str1, str2, m, n)
            validateLCS(s, str1, str2)
            return dp[m][n]

        }
        function validateLCS(el, str1, str2) {
            var re = new RegExp(el.split("").join(".*"))
            console.log(el, re.test(str1), re.test(str2))
            return re.test(str1) && re.test(str2)
        }

        var c1 = LCS( "ABCBDAB","BDCABA");
        console.log(c1) //4 BCBA、BCAB、BDAB
        var c2 = LCS("13456778" , "357486782" );
        console.log(c2) //5 34678
        var c3 = LCS("ACCGGTCGAGTGCGCGGAAGCCGGCCGAA" ,"GTCGTTCGGAATGCCGTTGCTCTGTAAA" );
        console.log(c3) //20 GTCGTCGGAAGCCGGCCGAA

    </script>
</body>
</html>